<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Nathan Moore Programmer</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
		<div id="container"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.3.min.js"><\/script>')</script>
		
		<script src="js/VideoController.js"></script>
		
        <script src="js/vendor/three.min.js"></script>			<!-- three.js minnified js library -->
		<script src="js/vendor/Projector.js"></script>			<!-- Camera helper class -->
		<script src="js/vendor/CanvasRenderer.js"></script>		<!-- Renderer for Canvas -->
		<script src="js/vendor/Detector.js"></script> 			<!-- Detects if HTML5 is supported in browser -->
		<script src="js/vendor/tween.min.js"></script>			<!-- Tween helper script -->
		<script src="js/vendor/stats.min.js"></script>			<!-- Debug script for three.js -->
		
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <script src="js/textUtility.js"></script>
        <script src="js/videoUtility.js"></script>
        <script src="js/background.js"></script>

		<video id="video" style="display:none">
			<source src="img/DemoReel.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
			<p>Your browser doesn't support HTML5 video. Please download a browser from this century to view this site.</p>
		</video>
		
        <script>
			
			var stats, displayStats = true; //variables for debugging
			var container;
			var camera, camTarget, scene, renderer; //variables for the page
			var video, image, imageContext,
			imageReflection, imageReflectionContext, imageReflectionGradient,
			texture, textureReflection,
			particles, particleSpeed, particleLifetime;

			var videoMesh, playPauseMesh, volumeMesh, seekMesh;
			var gamesMesh;
			var buttons = [ ];
			var links = [ ];
			
			var mouse, raycaster;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;
			
			//
			init();
			animate();
			
			function init() //TODO: fix all hard coded values to fit multiple screen resolutions.
			{	
				container = document.createElement( 'div' );
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 5000 );
				camera.position.set( 0, 0, 1000 );

				scene = new THREE.Scene();
				
				var spritey = makeTextSprite( " Update coming ", 
					{ fontsize: 64 } );
				spritey.position.set(-85,105,550);
			
				var spritey = makeTextSprite( " soon! ", 
					{ fontsize: 64 } );
				spritey.position.set(0,105,600);
				
				createBackgroundParticles(); //create the binary particles in the background.
				
				video = document.getElementById( 'video' );

				//Pre-load the video assets.
				THREE.ImageUtils.loadTexture("img/Play.png");
				THREE.ImageUtils.loadTexture("img/Pause.png");
				THREE.ImageUtils.loadTexture( 'img/Mute.png' );
				THREE.ImageUtils.loadTexture("img/Unmute.png");
				
				image = document.createElement( 'canvas' );
				image.width = 720; //480
				image.height = 480; //204

				imageContext = image.getContext( '2d' );
				imageContext.fillStyle = '#0000dd';
				imageContext.fillRect( 0, 0, 720, 480 ); //imageContext.fillRect( 0, 0, 480, 204 );
				
				raycaster = new THREE.Raycaster();
				mouse = new THREE.Vector2();			//used for camera movement
				camTarget = new THREE.Vector3();
				
				//if ( webglAvailable() ) //TODO: Make the site compatible with WebGL and Canvas.
				//{
				//	renderer = new THREE.WebGLRenderer();
				//} 
				//else 
				//{
				//	renderer = new THREE.CanvasRenderer();
				//}
				
				loadVideos();
                displayVideos();
				
				renderer = new THREE.CanvasRenderer();
				renderer.setClearColor( 0xf0f0f0 ); //f0f0f0 //TODO: return this to the original color.
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );
				
				if (displayStats)
				{
					stats = new Stats();
					stats.domElement.style.position = 'absolute';
					stats.domElement.style.top = '0px';
					container.appendChild( stats.domElement );
				}
				
				//TODO: add touch move listener
				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'mousedown', onDocumentMouseDown, false );
				window.addEventListener( 'resize', onWindowResize, false );
			}

		</script>
		
        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
